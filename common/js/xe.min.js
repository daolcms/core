/**
 * @file   common/js/xe.min.js
 * @author NHN (developers@xpressengine.com)
 * @Adaptor DAOL Project (developer@daolcms.org)
 * @brief  XE Common JavaScript
 **/
function xSleep(e){e=e/1e3;var t=new Date;var n=new Date;while(n.getTime()-t.getTime()<e){n=new Date}}function isDef(){for(var e=0;e<arguments.length;++e){if(typeof arguments[e]=="undefined")return false}return true}function winopen(e,t,n){if(typeof xeVid!="undefined"&&e.indexOf(request_uri)>-1&&!e.getQuery("vid"))e=e.setQuery("vid",xeVid);try{if(t!="_blank"&&winopen_list[t]){winopen_list[t].close();winopen_list[t]=null}}catch(r){}if(typeof t=="undefined")t="_blank";if(typeof n=="undefined")n="";var i=window.open(e,t,n);i.focus();if(t!="_blank")winopen_list[t]=i}function popopen(e,t){if(typeof t=="undefined")t="_blank";if(typeof xeVid!="undefined"&&e.indexOf(request_uri)>-1&&!e.getQuery("vid"))e=e.setQuery("vid",xeVid);winopen(e,t,"width=650,height=500,scrollbars=yes,resizable=yes,toolbars=no")}function sendMailTo(e){location.href="mailto:"+e}function move_url(e,t){if(!e)return false;if(typeof t=="undefined")t="N";if(t=="N"){t=false}else{t=true}if(/^\./.test(e))e=request_uri+e;if(t){winopen(e)}else{location.href=e}return false}function displayMultimedia(e,t,n,r){var i=_displayMultimedia(e,t,n,r);if(i)document.writeln(i)}function _displayMultimedia(e,t,n,r){if(e.indexOf("files")==0)e=request_uri+e;var i={wmode:"transparent",allowScriptAccess:"sameDomain",quality:"high",flashvars:"",autostart:false};var s=jQuery.extend(i,r||{});var o=s.autostart&&s.autostart!="false"?"true":"false";delete s.autostart;var u="";var a="";var f="";if(/\.(gif|jpg|jpeg|bmp|png)$/i.test(e)){f='<img src="'+e+'" width="'+t+'" height="'+n+'" />'}else if(/\.flv$/i.test(e)||/\.mov$/i.test(e)||/\.moov$/i.test(e)||/\.m4v$/i.test(e)){f='<embed src="'+request_uri+'common/img/flvplayer.swf" allowfullscreen="true" allowscriptaccess="never" autostart="'+o+'" width="'+t+'" height="'+n+'" flashvars="&file='+e+"&width="+t+"&height="+n+"&autostart="+o+'" wmode="'+s.wmode+'" />'}else if(/\.swf/i.test(e)){u="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";if(typeof enforce_ssl!="undefined"&&enforce_ssl){a="https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0"}else{a="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0"}f='<object classid="'+u+'" codebase="'+a+'" width="'+t+'" height="'+n+'" flashvars="'+s.flashvars+'">';f+='<param name="movie" value="'+e+'" />';for(var l in s){if(s[l]!="undefined"&&s[l]!=""){f+='<param name="'+l+'" value="'+s[l]+'" />'}}f+=""+'<embed src="'+e+'" allowscriptaccess="never" autostart="'+o+'" width="'+t+'" height="'+n+'" flashvars="'+s.flashvars+'" wmode="'+s.wmode+'"></embed>'+"</object>"}else{if(jQuery.browser.mozilla||jQuery.browser.opera){o=s.autostart&&s.autostart!="false"?"1":"0"}f='<embed src="'+e+'" allowscriptaccess="never" autostart="'+o+'" width="'+t+'" height="'+n+'"';if(s.wmode=="transparent"){f+=' windowlessvideo="1"'}f+="></embed>"}return f}function zbxe_folder_open(e){jQuery("#folder_open_"+e).hide();jQuery("#folder_close_"+e).show();jQuery("#folder_"+e).show()}function zbxe_folder_close(e){jQuery("#folder_open_"+e).show();jQuery("#folder_close_"+e).hide();jQuery("#folder_"+e).hide()}function setFixedPopupSize(){var e=jQuery,t=e(window),n=e("body>.popup"),r,i,s,o,u;u=n.css({overflow:"scroll"}).offset();r=n.width(10).height(1e4).get(0).scrollWidth+u.left*2;i=n.height(10).width(1e4).get(0).scrollHeight+u.top*2;if(r<600)r=600+u.left*2;s=t.width();o=t.height();if(r!=s)window.resizeBy(r-s,0);if(i!=o)window.resizeBy(0,i-o);n.width(r-u.left*2).css({overflow:"",height:""})}function doCallModuleAction(e,t,n){var r={target_srl:n,cur_mid:current_mid,mid:current_mid};exec_xml(e,t,r,completeCallModuleAction)}function completeCallModuleAction(e,t){if(e["message"]!="success")alert(e["message"]);location.reload()}function completeMessage(e){alert(e["message"]);location.reload()}function doChangeLangType(e){if(typeof e=="string"){setLangType(e)}else{var t=e.options[e.selectedIndex].value;setLangType(t)}location.href=location.href.setQuery("l","")}function setLangType(e){var t=new Date;t.setTime(t.getTime()+7e3*24*36e5);setCookie("lang_type",e,t,"/")}function doDocumentPreview(e){var t=e;while(t.nodeName!="FORM"){t=t.parentNode}if(t.nodeName!="FORM")return;var n=t.getAttribute("editor_sequence");var r=editorGetContent(n);var i=window.open("","previewDocument","toolbars=no,width=700px;height=800px,scrollbars=yes,resizable=yes");var s=jQuery("#previewDocument");if(!s.length){jQuery('<form id="previewDocument" target="previewDocument" method="post" action="'+request_uri+'">'+'<input type="hidden" name="module" value="document" />'+'<input type="hidden" name="act" value="dispDocumentPreview" />'+'<input type="hidden" name="content" />'+"</form>").appendTo(document.body);s=jQuery("#previewDocument")[0]}else{s=s[0]}if(s){s.content.value=r;s.submit()}}function doDocumentSave(e){var t=e.form.getAttribute("editor_sequence");var n=editorRelKeys[t]["content"].value;if(typeof t!="undefined"&&t&&typeof editorRelKeys!="undefined"&&typeof editorGetContent=="function"){var r=editorGetContent(t);editorRelKeys[t]["content"].value=r}var i={},s=["error","message","document_srl"],o=e.form.elements,u=jQuery(e.form).serializeArray();jQuery.each(u,function(e,t){var n=jQuery.trim(t.value);if(!n)return true;if(/\[\]$/.test(t.name))t.name=t.name.replace(/\[\]$/,"");if(i[t.name])i[t.name]+="|@|"+n;else i[t.name]=t.value});exec_xml("document","procDocumentTempSave",i,completeDocumentSave,s,i,e.form);editorRelKeys[t]["content"].value=n;return false}function completeDocumentSave(e){jQuery("input[name=document_srl]").eq(0).val(e["document_srl"]);alert(e["message"])}function doDocumentLoad(e){objForSavedDoc=e.form;popopen(request_uri.setQuery("module","document").setQuery("act","dispTempSavedList"))}function doDocumentSelect(e,t){if(!opener||!opener.objForSavedDoc){window.close();return}if(t==underfined){t="document"}switch(t){case"page":var n=opener.current_url;n=n.setQuery("document_srl",e);if(n.getQuery("act")==="dispPageAdminMobileContentModify"){n=n.setQuery("act","dispPageAdminMobileContentModify")}else{n=n.setQuery("act","dispPageAdminContentModify")}opener.location.href=n;break;default:opener.location.href=opener.current_url.setQuery("document_srl",e).setQuery("act","dispBoardWrite");break}window.close()}function viewSkinInfo(e,t){popopen("./?module=module&act=dispModuleSkinInfo&selected_module="+e+"&skin="+t,"SkinInfo")}function doAddDocumentCart(e){var t=e.value;addedDocument[addedDocument.length]=t;setTimeout(function(){callAddDocumentCart(addedDocument.length)},100)}function callAddDocumentCart(e){if(addedDocument.length<1||e!=addedDocument.length)return;var t=new Array;t["srls"]=addedDocument.join(",");exec_xml("document","procDocumentAddCart",t,null);addedDocument=new Array}function transRGB2Hex(e){if(!e)return e;if(e.indexOf("#")>-1)return e.replace(/^#/,"");if(e.toLowerCase().indexOf("rgb")<0)return e;e=e.replace(/^rgb\(/i,"").replace(/\)$/,"");value_list=e.split(",");var t="";for(var n=0;n<value_list.length;n++){var r=parseInt(value_list[n],10).toString(16);if(r.length==1)r="0"+r;t+=r}return t}function toggleSecuritySignIn(){var e=location.href;if(/https:\/\//i.test(e))location.href=e.replace(/^https/i,"http");else location.href=e.replace(/^http/i,"https")}function reloadDocument(){location.reload()}function toggleDisplay(e){jQuery("#"+e).toggle()}function checkboxSelectAll(e,t,n){var r=t;var i={};if(typeof e!="undefined")i.wrap=e;if(typeof n!="undefined")i.checked=n;XE.checkboxToggleAll(r,i)}function clickCheckBoxAll(e,t){var n=t;var r={doClick:true};if(typeof e!="undefined")r.wrap=e;XE.checkboxToggleAll(n,r)}function svc_folder_open(e){jQuery("#_folder_open_"+e).hide();jQuery("#_folder_close_"+e).show();jQuery("#_folder_"+e).show()}function svc_folder_close(e){jQuery("#_folder_open_"+e).show();jQuery("#_folder_close_"+e).hide();jQuery("#_folder_"+e).hide()}function open_calendar(e,t,n){if(typeof t=="undefined")t="";var r="./common/tpl/calendar.php?";if(e)r+="fo_id="+e;if(t)r+="&day_str="+t;if(n)r+="&callback_func="+n;popopen(r,"Calendar")}function createPopupMenu(){}function chkPopupMenu(){}function displayPopupMenu(e,t,n){XE.displayPopupMenu(e,t,n)}function GetObjLeft(e){return jQuery(e).offset().left}function GetObjTop(e){return jQuery(e).offset().top}function replaceOuterHTML(e,t){jQuery(e).replaceWith(t)}function getOuterHTML(e){return jQuery(e).html().trim()}function setCookie(e,t,n,r){var i=e+"="+escape(t)+(!n?"":"; expires="+n.toGMTString())+"; path="+(!r?"/":r);document.cookie=i}function getCookie(e){var t=document.cookie.match(new RegExp(e+"=(.*?)(?:;|$)"));if(t)return unescape(t[1])}function is_def(e){return typeof e!="undefined"}function ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}function get_by_id(e){return document.getElementById(e)}function xml2json(e,t,n){var r={toObj:function(e){var t={};if(e.nodeType==1){if(n&&e.attributes.length)for(var i=0;i<e.attributes.length;i++)t["@"+e.attributes[i].nodeName]=(e.attributes[i].nodeValue||"").toString();if(e.firstChild){var s=0,o=0,u=false;for(var a=e.firstChild;a;a=a.nextSibling){if(a.nodeType==1)u=true;else if(a.nodeType==3&&a.nodeValue.match(/[^ \f\n\r\t\v]/))s++;else if(a.nodeType==4)o++}if(u){if(s<2&&o<2){r.removeWhite(e);for(var a=e.firstChild;a;a=a.nextSibling){if(a.nodeType==3)t=r.escape(a.nodeValue);else if(a.nodeType==4)t=r.escape(a.nodeValue);else if(t[a.nodeName]){if(t[a.nodeName]instanceof Array)t[a.nodeName][t[a.nodeName].length]=r.toObj(a);else t[a.nodeName]=[t[a.nodeName],r.toObj(a)]}else t[a.nodeName]=r.toObj(a)}}else{if(!e.attributes.length)t=r.escape(r.innerXml(e));else t["#text"]=r.escape(r.innerXml(e))}}else if(s){if(!e.attributes.length)t=r.escape(r.innerXml(e));else t["#text"]=r.escape(r.innerXml(e))}else if(o){if(o>1)t=r.escape(r.innerXml(e));else for(var a=e.firstChild;a;a=a.nextSibling){t=r.escape(a.nodeValue)}}}if(!e.attributes.length&&!e.firstChild)t=null}else if(e.nodeType==9){t=r.toObj(e.documentElement)}else alert("unhandled node type: "+e.nodeType);return t},toJson:function(e,t,n){var i=t?'"'+t+'"':"";if(e instanceof Array){for(var s=0,o=e.length;s<o;s++)e[s]=r.toJson(e[s],"",n+"	");i+=(t?":[":"[")+(e.length>1?"\n"+n+"	"+e.join(",\n"+n+"	")+"\n"+n:e.join(""))+"]"}else if(e==null)i+=(t&&":")+"null";else if(typeof e=="object"){var u=[];for(var a in e)u[u.length]=r.toJson(e[a],a,n+"	");i+=(t?":{":"{")+(u.length>1?"\n"+n+"	"+u.join(",\n"+n+"	")+"\n"+n:u.join(""))+"}"}else if(typeof e=="string")i+=(t&&":")+'"'+e.toString()+'"';else i+=(t&&":")+e.toString();return i},innerXml:function(e){var t="";if("innerHTML"in e)t=e.innerHTML;else{var n=function(e){var t="";if(e.nodeType==1){t+="<"+e.nodeName;for(var r=0;r<e.attributes.length;r++)t+=" "+e.attributes[r].nodeName+'="'+(e.attributes[r].nodeValue||"").toString()+'"';if(e.firstChild){t+=">";for(var i=e.firstChild;i;i=i.nextSibling)t+=n(i);t+="</"+e.nodeName+">"}else t+="/>"}else if(e.nodeType==3)t+=e.nodeValue;else if(e.nodeType==4)t+="<![CDATA["+e.nodeValue+"]]>";return t};for(var r=e.firstChild;r;r=r.nextSibling)t+=n(r)}return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t=e.firstChild;t;){if(t.nodeType==3){if(!t.nodeValue.match(/[^ \f\n\r\t\v]/)){var n=t.nextSibling;e.removeChild(t);t=n}else t=t.nextSibling}else if(t.nodeType==1){r.removeWhite(t);t=t.nextSibling}else t=t.nextSibling}return e}};if(e.nodeType==9)e=e.documentElement;var i=r.toObj(r.removeWhite(e)),s;if(typeof JSON=="object"&&jQuery.isFunction(JSON.stringify)&&false){var o={};o[e.nodeName]=i;s=JSON.stringify(o);return s}else{s=r.toJson(i,e.nodeName,"");return"{"+(t?s.replace(/\t/g,t):s.replace(/\t|\n/g,""))+"}"}}function filterAlertMessage(e){var t=e["error"];var n=e["message"];var r=e["act"];var i=e["redirect_url"];var s=location.href;if(typeof n!="undefined"&&n&&n!="success")alert(n);if(typeof r!="undefined"&&r)s=current_url.setQuery("act",r);else if(typeof i!="undefined"&&i)s=i;if(s==location.href)s=s.replace(/#(.*)$/,"");location.href=s}function procFilter(e,t){t(e);return false}function legacy_filter(e,t,n,r,i,s,o,u){var a=xe.getApp("Validator")[0],f=jQuery,l=[];if(!a)return false;if(!t.elements["_filter"])f(t).prepend('<input type="hidden" name="_filter" />');t.elements["_filter"].value=e;l[0]=e;l[1]=function(e){var a={},l=[],c=e.elements,h=f(e).serializeArray();f.each(h,function(e,t){var n=f.trim(t.value),r=t.name;if(!n||!r)return true;if(u[r])r=u[r];if(/\[\]$/.test(r))r=r.replace(/\[\]$/,"");if(a[r])a[r]+="|@|"+n;else a[r]=t.value});if(o&&!confirm(o))return false;exec_xml(n,r,a,i,s,a,t)};a.cast("ADD_CALLBACK",l);a.cast("VALIDATE",[t,e]);return false}(function(e){function s(){var t=function(){var t=this;var n=null;if(e.isArray(this._plugins))this._plugins=[];if(this._messages)this._messages={};else this._binded_fn={};e.each(this,function(n,r){if(!e.isFunction(r))return true;if(!/^API_([A-Z0-9_]+)$/.test(n))return true;var i=RegExp.$1;var s=function(e,r){return t[n](e,r)};if(t._messages)t._messages[i]=[s];else t._binded_fn[i]=s});if(e.isFunction(this.init))this.init.apply(this,arguments)};return t}var t,n,r;var i=[];t={getName:function(){return"Core"},createApp:function(t,r){var i=s();e.extend(i.prototype,n,r);i.prototype.getName=function(){return t};return i},createPlugin:function(t,n){var i=s();e.extend(i.prototype,r,n);i.prototype.getName=function(){return t};return i},getApps:function(){return e.makeArray(i)},getApp:function(e){e=(e||"").toLowerCase();if(typeof i[e]!="undefined"){return i[e]}else{return null}},registerApp:function(t){var n=t.getName().toLowerCase();i.push(t);if(!e.isArray(i[n])){i[n]=[]}i[n].push(t);t.parent=this;if(e.isFunction(t.activate))t.activate()},unregisterApp:function(t){var n=t.getName().toLowerCase();var r=e.inArray(t,i);if(r>=0)i=i.splice(r,1);if(e.isArray(i[n])){r=e.inArray(t,i[n]);if(r>=0)i[n]=i[n].splice(r,1)}if(e.isFunction(t.deactivate))t.deactivate()},broadcast:function(e,t){this._broadcast(this,e,t)},_broadcast:function(e,t,n){for(var r=0;r<i.length;r++){i[r]._cast(e,t,n)}this._cast(e,t,n)}};n={_plugins:[],_messages:{},getPlugin:function(t){t=t.toLowerCase();if(e.isArray(this._plugins[t])){return this._plugins[t]}else{return[]}},registerPlugin:function(t){var n=this;var r=t.getName().toLowerCase();if(e.inArray(t,this._plugins)>=0)return false;this._plugins.push(t);if(!e.isArray(this._plugins[r]))this._plugins[r]=[];this._plugins[r].push(t);e.each(t._binded_fn,function(e,t){n.registerHandler(e,t)});t.oApp=this;if(e.isFunction(t.activate))t.activate();return true},registerHandler:function(t,n){var r=this._messages;t=t.toUpperCase();if(!e.isArray(r[t]))r[t]=[];r[t].push(n)},cast:function(e,t){return this._cast(this,e,t||[])},broadcast:function(e,t,n){if(this.parent&&this.parent._broadcast){this.parent._broadcast(e,t,n)}},_cast:function(t,n,r){var i,s;var o=this._messages;n=n.toUpperCase();if(o["BEFORE_"+n]||this["API_BEFORE_"+n]){var u=this._cast(t,"BEFORE_"+n,r);if(!u)return}var a=[],f="API_"+n;if(e.isArray(o[n])){for(i=0;i<o[n].length;i++){a.push(o[n][i](t,r))}}if(a.length<2)a=a[0];if(o["AFTER_"+n]||this["API_AFTER_"+n]){this._cast(t,"AFTER_"+n,r)}if(!/^(?:AFTER|BEFORE)_/.test(n)){return a}else{return e.isArray(a)?e.inArray(false,a)<0:typeof a=="undefined"?true:!!a}}};r={oApp:null,cast:function(e,t){if(this.oApp&&this.oApp._cast){return this.oApp._cast(this,e,t||[])}},broadcast:function(e,t){if(this.oApp&&this.oApp.broadcast){this.oApp.broadcast(this,mag,t||[])}}};window.xe=e.extend(n,t);window.xe.lang={};e(function(){xe.broadcast("ONREADY")});e(window).load(function(){xe.broadcast("ONLOAD")})})(jQuery);if(jQuery)jQuery.noConflict();(function(e){var t=navigator.userAgent.toLowerCase();e.os={Linux:/linux/.test(t),Unix:/x11/.test(t),Mac:/mac/.test(t),Windows:/win/.test(t)};e.os.name=e.os.Windows?"Windows":e.os.Linux?"Linux":e.os.Unix?"Unix":e.os.Mac?"Mac":"";window.XE={loaded_popup_menus:new Array,addedDocument:new Array,checkboxToggleAll:function(t){if(!is_def(t))t="cart";var n={wrap:null,checked:"toggle",doClick:false};switch(arguments.length){case 1:if(typeof arguments[0]=="string"){t=arguments[0]}else{e.extend(n,arguments[0]||{});t="cart"}break;case 2:t=arguments[0];e.extend(n,arguments[1]||{})}if(n.doClick==true)n.checked=null;if(typeof n.wrap=="string")n.wrap="#"+n.wrap;if(n.wrap){var r=e(n.wrap).find('input[name="'+t+'"]:checkbox')}else{var r=e('input[name="'+t+'"]:checkbox')}if(n.checked=="toggle"){r.each(function(){e(this).attr("checked",e(this).attr("checked")?false:true)})}else{n.doClick==true?r.click():r.attr("checked",n.checked)}},displayPopupMenu:function(t,n,r){var i=r["target_srl"];var s=r["menu_id"];var o=t["menus"];var u="";if(this.loaded_popup_menus[s]){u=this.loaded_popup_menus[s]}else{if(o){var a=o["item"];if(typeof a.length=="undefined"||a.length<1)a=new Array(a);if(a.length){for(var f=0;f<a.length;f++){var l=a[f].url;var c=a[f].str;var h=a[f].icon;var p=a[f].target;var d="";var v="";switch(p){case"popup":v=" onclick=\"popopen(this.href,'"+p+"'); return false;\"";break;case"javascript":v=' onclick="'+l+'; return false; "';l="#";break;default:v=' onclick="window.open(this.href); return false;"';break}u+="<li "+d+'><a href="'+l+'"'+v+">"+c+"</a></li> "}}}this.loaded_popup_menus[s]=u}if(u){var m=e("#popup_menu_area").html("<ul>"+u+"</ul>");var g={top:r["page_y"],left:r["page_x"]};if(m.outerHeight()+g.top>e(window).height()+e(window).scrollTop())g.top=e(window).height()-m.outerHeight()+e(window).scrollTop();if(m.outerWidth()+g.left>e(window).width()+e(window).scrollLeft())g.left=e(window).width()-m.outerWidth()+e(window).scrollLeft();m.css({top:g.top,left:g.left}).show()}}}})(jQuery);jQuery(function(e){if(e.browser.msie){e("select").each(function(e,t){var n=false;var r=new Array;for(var i=0;i<t.options.length;i++){if(t.options[i].disabled){t.options[i].style.color="#CCCCCC";n=true}else{r[e]=r[e]>-1?r[e]:i}}if(!n)return;t.oldonchange=t.onchange;t.onchange=function(){if(this.options[this.selectedIndex].disabled){this.selectedIndex=r[e]}else{if(this.oldonchange)this.oldonchange()}};if(t.selectedIndex>=0&&t.options[t.selectedIndex].disabled)t.onchange()})}var t=e(".xe_content .fold_button");if(t.size()){var n=e("div.fold_container",t);e("button.more",t).click(function(){e(this).hide().next("button").show().parent().next(n).show()});e("button.less",t).click(function(){e(this).hide().prev("button").show().parent().next(n).hide()})}jQuery('input[type="submit"],button[type="submit"]').click(function(e){var t=jQuery(e.currentTarget);setTimeout(function(){return function(){t.attr("disabled","disabled")}}(),0);setTimeout(function(){return function(){t.removeAttr("disabled")}}(),3e3)})});(function(){function e(e,t){return e.replace(/#.*$/,"")===t.replace(/#.*$/,"")}var t=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"};String.prototype.getQuery=function(t){var n=e(this,window.location.href)?current_url:this;var r=n.indexOf("?");if(r==-1)return null;var i=n.substr(r+1,this.length),s={};i.replace(/([^=]+)=([^&]*)(&|$)/g,function(){s[arguments[1]]=arguments[2]});var o=s[t];if(typeof o=="undefined")o="";return o};String.prototype.setQuery=function(n,r){var i=e(this,window.location.href)?current_url:this;var s=i.indexOf("?");var o=i.replace(/#$/,"");var u,a,f;if(typeof r=="undefined")r="";if(s!=-1){var l=o.substr(s+1,i.length),c={},h=[];o=i.substr(0,s);l.replace(/([^=]+)=([^&]*)(&|$)/g,function(e,t,n){c[t]=n});c[n]=r;for(var p in c){if(!c.hasOwnProperty(p))continue;if(!(f=String(c[p]).trim()))continue;h.push(p+"="+decodeURI(f))}l=h.join("&");o=o+(l?"?"+l:"")}else{if(String(r).trim())o=o+"?"+n+"="+r}a=/^https:\/\/([^:\/]+)(:\d+|)/i;if(a.test(o)){var d="http://"+RegExp.$1;if(window.http_port&&http_port!=80)d+=":"+http_port;o=o.replace(a,d)}var v=!!window.enforce_ssl;if(!v&&t(window.ssl_actions)&&(u=o.getQuery("act"))){for(var m=0,g=ssl_actions.length;m<g;m++){if(ssl_actions[m]===u){v=true;break}}}a=/http:\/\/([^:\/]+)(:\d+|)/i;if(v&&a.test(o)){var d="https://"+RegExp.$1;if(window.https_port&&https_port!=443)d+=":"+https_port;o=o.replace(a,d)}o=o.replace(/\/(index\.php)?\?/,"/index.php?");return encodeURI(o)};String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}})();var winopen_list=new Array;var objForSavedDoc=null;var addedDocument=new Array;var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t="";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}};if(typeof resizeImageContents=="undefined"){function resizeImageContents(){}}if(typeof activateOptionDisabled=="undefined"){function activateOptionDisabled(){}}objectExtend=jQuery.extend;var loaded_popup_menus=XE.loaded_popup_menus;jQuery(function(e){e(".lang_code").each(function(){var t=e(this);var n=t.attr("id");if(typeof n=="undefined")n=t.attr("name");if(typeof n=="undefined")return;t.after("<a href='"+request_uri.setQuery("module","module").setQuery("act","dispModuleAdminLangcode").setQuery("target",n)+"' class='buttonSet buttonSetting' onclick='popopen(this.href);return false;'><span>find_langcode</span></a>")});e(document).click(function(t){var n=e("#popup_menu_area");if(!n.length)n=e('<div id="popup_menu_area" style="display:none;z-index:9999" />').appendTo(document.body);n.hide();var r=e(t.target).filter("a,div,span");if(!r.length)r=e(t.target).closest("a,div,span");if(!r.length)return;var i=r.attr("class"),s;if(i)s=i.match(new RegExp("(?:^| )((document|comment|member)_([1-9]\\d*))(?: |$)",""));if(!s)return;var o="get"+ucfirst(s[2])+"Menu";var u={mid:current_mid,cur_mid:current_mid,menu_id:s[1],target_srl:s[3],cur_act:current_url.getQuery("act"),page_x:t.pageX,page_y:t.pageY};var a="error message menus".split(" ");t.preventDefault();t.stopPropagation();if(is_def(window.xeVid))u.vid=xeVid;if(is_def(XE.loaded_popup_menus[u.menu_id]))return XE.displayPopupMenu(u,a,u);show_waiting_message=false;exec_xml("member",o,u,XE.displayPopupMenu,a,u);show_waiting_message=true});e("a._xe_popup").click(function(){var t=e(this),n=t.attr("name"),r=t.attr("href"),i;if(!n)n="_xe_popup_"+Math.floor(Math.random()*1e3);i=window.open(r,n,"left=10,top=10,width=10,height=10,resizable=no,scrollbars=no,toolbars=no");if(i)i.focus();return false});if(e.datepicker){e.datepicker.setDefaults({dateFormat:"yy-mm-dd"})}});var show_waiting_message=true;(function($){function send_by_form(e,t){var n="xeTmpIframe";var r="xeVirtualForm";if(!$("#"+n).length){$('<iframe name="%id%" id="%id%" style="position:absolute;left:-1px;top:1px;width:1px;height:1px"></iframe>'.replace(/%id%/g,n)).appendTo(document.body)}$("#"+r).remove();var i=$('<form id="%id%"></form>'.replace(/%id%/g,r)).attr({id:r,method:"post",action:e,target:n});t["xeVirtualRequestMethod"]="xml";t["xeRequestURI"]=location.href.replace(/#(.*)$/i,"");t["xeVirtualRequestUrl"]=request_uri;$.each(t,function(e,t){$('<input type="hidden">').attr("name",e).attr("value",t).appendTo(i)});i.appendTo(document.body).submit()}function arr2obj(e){var t={};for(var n in e){if(e.hasOwnProperty(n))t[n]=e[n]}return t}function beforeUnloadHandler(){return""}$.exec_xml=window.exec_xml=function(module,act,params,callback_func,response_tags,callback_func_arg,fo_obj){function onsuccess(data,textStatus,xhr){var resp_xml=$(data).find("response")[0],resp_obj,txt="",ret=[],tags={},json_str="";waiting_obj.css("display","none").trigger("cancel_confirm");if(!resp_xml){alert(_xhr.responseText);return null}json_str=xml2json(resp_xml,false,false);resp_obj=typeof JSON=="object"&&$.isFunction(JSON.parse)?JSON.parse(json_str):eval("("+json_str+")");resp_obj=resp_obj.response;if(typeof resp_obj=="undefined"){ret["error"]=-1;ret["message"]="Unexpected error occured.";try{if(typeof (txt=resp_xml.childNodes[0].firstChild.data)!="undefined")ret["message"]+="\r\n"+txt}catch(e){}return ret}$.each(response_tags,function(e,t){tags[t]=true});tags["redirect_url"]=true;tags["act"]=true;$.each(resp_obj,function(e,t){if(tags[e])ret[e]=t});if(ret["error"]!=0){if($.isFunction($.exec_xml.onerror)){return $.exec_xml.onerror(module,act,ret,callback_func,response_tags,callback_func_arg,fo_obj)}alert((ret["message"]||"An unknown error occured while loading ["+module+"."+act+"]").replace(/\\n/g,"\n"));return null}if(ret["redirect_url"]){location.href=ret["redirect_url"].replace(/&/g,"&");return null}if($.isFunction(callback_func))callback_func(ret,response_tags,callback_func_arg,fo_obj)}var xml_path=request_uri+"index.php";if(!params)params={};if($.isArray(params))params=arr2obj(params);params["module"]=module;params["act"]=act;if(typeof xeVid!="undefined")params["vid"]=xeVid;if(typeof response_tags=="undefined"||response_tags.length<1)response_tags=["error","message"];else{response_tags.push("error","message")}if($.isArray(ssl_actions)&&params["act"]&&$.inArray(params["act"],ssl_actions)>=0){var url=default_url||request_uri;var port=window.https_port||443;var _ul=$("<a>").attr("href",url)[0];var target="https://"+_ul.hostname.replace(/:\d+$/,"");if(port!=443)target+=":"+port;if(_ul.pathname[0]!="/")target+="/";target+=_ul.pathname;xml_path=target.replace(/\/$/,"")+"/index.php"}var _u1=$("<a>").attr("href",location.href)[0];var _u2=$("<a>").attr("href",xml_path)[0];if(_u1.protocol!=_u2.protocol||_u1.port!=_u2.port)return send_by_form(xml_path,params);var xml=[],xmlHelper=function(e){var t=[];if($.isArray(e)){$.each(e,function(e,n){t.push('<value type="array">'+xmlHelper(n)+"</value>")})}else if($.isPlainObject(e)){$.each(e,function(e,n){t.push("<"+e+">"+xmlHelper(n)+"</"+e+">")})}else if(!$.isFunction(e)){t.push("<![CDATA["+e+"]]>")}return t.join("\n")};xml.push('<?xml version="1.0" encoding="utf-8" ?>');xml.push("<methodCall>");xml.push("<params>");xml.push(xmlHelper(params));xml.push("</params>");xml.push("</methodCall>");var _xhr=null;if(_xhr&&_xhr.readyState!=0)_xhr.abort();try{$.ajax({url:xml_path,type:"POST",dataType:"xml",data:xml.join("\n"),contentType:"text/plain",beforeSend:function(e){_xhr=e},success:onsuccess,error:function(e,t){waiting_obj.css("display","none");var n="";if(t=="parsererror"){n="The result is not valid XML :\n-------------------------------------\n";if(e.responseText=="")return;n+=e.responseText.replace(/<[^>]+>/g,"")}else{n=t}try{console.log(n)}catch(r){}}})}catch(e){alert(e);return}var waiting_obj=$(".wfsr");if(show_waiting_message&&waiting_obj.length){waiting_obj.html(waiting_message).show()}};$.exec_json=function(e,t,n){if(typeof t=="undefined")t={};e=e.split(".");if(e.length==2){var r=$(".wfsr").data("timeout_id");if(r)clearTimeout(r);$(".wfsr").css("opacity",0);$(".wfsr").data("timeout_id",setTimeout(function(){$(".wfsr").css("opacity","")},1e3));if(show_waiting_message)$(".wfsr").html(waiting_message).show();$.extend(t,{module:e[0],act:e[1]});if(typeof xeVid!="undefined")$.extend(t,{vid:xeVid});try{$.ajax({type:"POST",dataType:"json",url:request_uri,contentType:"application/json",data:$.param(t),success:function(e){$(".wfsr").hide().trigger("cancel_confirm");if(e.error!="0"&&e.error>-1e3){if(e.error==-1&&e.message=="msg_is_not_administrator"){alert("You are not logged in as an administrator");if($.isFunction(callback_error))callback_error(e);return}else{alert(e.message);if($.isFunction(callback_error))callback_error(e);return}}if($.isFunction(callback_sucess))callback_sucess(e)},error:function(e,t){$(".wfsr").hide();var n="";if(t=="parsererror"){n="The result is not valid JSON :\n-------------------------------------\n";if(e.responseText==="")return;n+=e.responseText.replace(/<[^>]+>/g,"")}else{n=t}try{console.log(n)}catch(r){}}})}catch(i){alert(i);return}}};$.fn.exec_html=function(e,t,n,r,i){if(typeof t=="undefined")t={};if(!$.inArray(n,["html","append","prepend"]))n="html";var s=$(this);e=e.split(".");if(e.length==2){var o=$(".wfsr").data("timeout_id");if(o)clearTimeout(o);$(".wfsr").css("opacity",0);$(".wfsr").data("timeout_id",setTimeout(function(){$(".wfsr").css("opacity","")},1e3));if(show_waiting_message)$(".wfsr").html(waiting_message).show();$.extend(t,{module:e[0],act:e[1]});try{$.ajax({type:"POST",dataType:"html",url:request_uri,data:$.param(t),success:function(e){$(".wfsr").hide().trigger("cancel_confirm");s[n](e);if($.isFunction(r))r(i)},error:function(e,t){$(".wfsr").hide();var n="";if(t=="parsererror"){n="The result is not valid page :\n-------------------------------------\n";if(e.responseText==="")return;n+=e.responseText.replace(/<[^>]+>/g,"")}else{n=t}try{console.log(n)}catch(r){}}})}catch(u){alert(u);return}}};$(function(e){e(".wfsr").ajaxStart(function(){e(window).bind("beforeunload",beforeUnloadHandler)}).bind("ajaxStop cancel_confirm",function(){e(window).unbind("beforeunload",beforeUnloadHandler)})})})(jQuery);(function(e){function l(e){var t=[];if(e.is(":radio")){return e.filter(":checked").val()}else if(e.is(":checkbox")){e.filter(":checked").each(function(){t.push(this.value)});return t.join("|@|")}else{return e.val()}}function c(e){e+="";if(!e.length)return 0;e=encodeURI(e);var t=e.split("%").length-1;return e.length-t*2}var t=[];var n=[];var r={};var i=[];var s={};var o=xe.createApp("Validator",{init:function(){var e=/^[\w-]+((?:\.|\+|\~)[\w-]+)*@[\w-]+(\.[\w-]+)+$/;this.cast("ADD_RULE",["email",e]);this.cast("ADD_RULE",["email_address",e]);var t=/^[a-z]+[\w-]*[a-z0-9_]+$/i;this.cast("ADD_RULE",["userid",t]);this.cast("ADD_RULE",["user_id",t]);var n=/^(https?|ftp|mms):\/\/[0-9a-z-]+(\.[_0-9a-z-]+)+(:\d+)?/;this.cast("ADD_RULE",["url",n]);this.cast("ADD_RULE",["homepage",n]);var r=new RegExp("^[가-힣]*$");this.cast("ADD_RULE",["korean",r]);var i=new RegExp("^[가-힣0-9]*$");this.cast("ADD_RULE",["korean_number",i]);var s=/^[a-z]*$/i;this.cast("ADD_RULE",["alpha",s]);var o=/^[a-z][a-z0-9_]*$/i;this.cast("ADD_RULE",["alpha_number",o]);var u=/^[0-9]*$/;this.cast("ADD_RULE",["number",u])},run:function(e){var t="";if(e._filter)t=e._filter.value;var n=[e,t];var r=this.cast("VALIDATE",n);if(typeof r=="undefined")r=false;return r},API_ONREADY:function(){var t=this;e("form").each(function(){if(this.onsubmit){this["xe:onsubmit"]=this.onsubmit;this.onsubmit=null}}).submit(function(n){var r=this["xe:onsubmit"];var i=e.isFunction(r);var s=i?r.apply(this):t.run(this);if(!s){n.stopImmediatePropagation()}return s})},API_VALIDATE:function(t,n){function B(e){return e.replace(/([\.\+\-\[\]\{\}\(\)\\])/g,"\\$1")}var o=true,u=n[0],a=u.elements,h,p,d,v;var m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H;if(a["ruleset"])h=u.elements["ruleset"].value;else if(a["_filter"])h=u.elements["_filter"].value;if(!h)return true;if(e.isFunction(i[h]))v=i[h];h=e.extend({},r[h.toLowerCase()]||{},s);m=[];for(M=0,_=u.elements.length;M<_;M++){b=a[M];y=b.name;if(!y||!a[y])continue;if(!a[y].length||a[y][0]===b)m.push(y)}m=m.join("\n");p={};for(y in h){if(!h.hasOwnProperty(y))continue;g=[];if(y.substr(0,1)=="^"){g=m.match(new RegExp("^"+B(y.substr(1))+".*$","gm"))}else{continue}if(!g)g=[];for(M=0,_=g.length;M<_;M++){p[g[M]]=h[y]}h[y]=null;delete h[y]}h=e.extend(h,p);for(y in h){if(!h.hasOwnProperty(y))continue;f=h[y];b=a[y];if(!b){b=a[y+"[]"]}w=b?e.trim(l(e(b))):"";E=(f.modifier||"")+",";if(!b||b.disabled)continue;if(f["if"]){if(!e.isArray(f["if"]))f["if"]=[f["if"]];for(M=0;M<f["if"].length;M++){P=f["if"][M];H=new Function("el","return !!("+P.test.replace(/\$(\w+)/g,"(jQuery('[name=$1]').is(':radio, :checkbox') ? jQuery('[name=$1]:checked').val() : jQuery('[name=$1]').val())")+")");if(H(a))f[P.attr]=P.value;else delete f[P.attr]}}if(!w){if(f["default"])w=f["default"];if(f.required)return this.cast("ALERT",[u,y,"isnull"])&&false;else continue}N=parseInt(f.minlength)||0;T=parseInt(f.maxlength)||0;k=/b$/.test(f.minlength||"");C=/b$/.test(f.maxlength||"");S=w.length;if(k||C)x=c(w);if(N&&N>(k?x:S)||T&&T<(C?x:S)){return this.cast("ALERT",[u,y,"outofrange",N,T])&&false}if(f.equalto){A=a[f.equalto];O=A?e.trim(l(e(A))):"";if(A&&O!==w){return this.cast("ALERT",[u,y,"equalto"])&&false}}L=(f.rule||"").split(",");for(M=0,_=L.length;M<_;M++){if(!(D=L[M]))continue;o=this.cast("APPLY_RULE",[D,w]);if(E.indexOf("not,")>-1)o=!o;if(!o){return this.cast("ALERT",[u,y,"invalid_"+D])&&false}}}if(e.isFunction(v))return v(u);return true},API_ADD_RULE:function(e,t){var r=t[0].toLowerCase();n[r]=t[1]},API_DEL_RULE:function(e,t){var r=t[0].toLowerCase();delete n[r]},API_GET_RULE:function(e,t){var r=t[0].toLowerCase();if(n[r]){return n[r]}else{return null}},API_ADD_FILTER:function(e,t){var n=t[0].toLowerCase();var i=t[1];r[n]=i},API_DEL_FILTER:function(e,t){var n=t[0].toLowerCase();delete r[n]},API_GET_FILTER:function(e,t){var n=t[0].toLowerCase();if(r[n]){return r[n]}else{return null}},API_ADD_EXTRA_FIELD:function(e,t){var n=t[0].toLowerCase();var r=t[1];s[n]=r},API_GET_EXTRA_FIELD:function(e,t){var n=t[0].toLowerCase();return s[n]},API_DEL_EXTRA_FIELD:function(e,t){var n=t[0].toLowerCase();delete s[n]},API_APPLY_RULE:function(t,r){var i=r[0];var s=r[1];if(typeof n[i]=="undefined")return true;if(e.isFunction(n[i]))return n[i](s);if(n[i]instanceof RegExp)return n[i].test(s);if(e.isArray(n[i]))return e.inArray(s,n[i])>-1;return true},API_ALERT:function(t,n){var r=n[0];var i=n[1];var s=n[2];var o=n[3];var u=n[4];var a=this.cast("GET_MESSAGE",[i]);var f=this.cast("GET_MESSAGE",[s]);if(f!=s)f=f.indexOf("%s")<0?a+f:f.replace("%s",a);if(o||u)f+="("+(o||"")+"~"+(u||"")+")";this.cast("SHOW_ALERT",[f]);e(r.elements[i]).focus()},API_SHOW_ALERT:function(e,t){alert(t[0])},API_ADD_MESSAGE:function(e,n){var r=n[0];var i=n[1];t[r]=i},API_GET_MESSAGE:function(e,n){var r=n[0];return t[r]||r},API_ADD_CALLBACK:function(e,t){var n=t[0];var r=t[1];i[n]=r},API_REMOVE_CALLBACK:function(e,t){var n=t[0];delete i[n]}});var u=new o;xe.registerApp(u);var a=xe.createPlugin("editor_stub",{API_BEFORE_VALIDATE:function(e,t){var n=t[0];var r=n.getAttribute("editor_sequence");if(r&&typeof r=="object")r=r.value;if(r){try{editorRelKeys[r].content.value=editorRelKeys[r].func(r)||""}catch(i){}}}});u.registerPlugin(new a)})(jQuery)