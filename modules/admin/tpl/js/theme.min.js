jQuery(function(e){e("#theme,#skin").find("button.showAll").text("Show All").click(function(){var t=e(this),n=e("#skin").find(">.thumbPreview");if(t.toggleClass("hideAll").hasClass("hideAll")){t.text("Hide All");n.children("li").addClass("active").removeClass("highlight").eq(0).addClass("highlight").end().find(">ul.a:not(.selected)").show()}else{t.text("Show All");n.children("li").removeClass("active highlight").find(">ul.a:not(.selected)").hide()}}).end().find(">.thumbPreview").removeClass("jx").find("ul.a").hide().before('<ul class="a selected"></ul>').prev("ul.a").each(function(){var t=e(this);t.delegate("span.thumb","click",function(){e(this).closest(".a").nextAll("a.prevToggle:first").trigger("toggle.tp");return false}).append(t.next(".a").find(">li.noDirection:first"))}).end().after('<a href="#toggle-tp" class="prevToggle">Show</a>').next("a.prevToggle").bind("toggle.tp",function(){var t=e(this).prev(".a"),n,r=100;n=t.closest(".thumbPreview").children("li").removeClass("highlight").end();if(t.parent().toggleClass("active").hasClass("active")){t.slideDown(r).closest("li").addClass("highlight")}else{t.slideUp(r)}}).click(function(){e(this).trigger("toggle.tp");return false}).end().find("span.thumb").attr("role","radio").click(function(){e(this).next("input:radio").prop("checked",true).change()}).end().find("> .i > label").attr("title",function(){return e(this).text()}).end().find("input:radio").bind("redraw",function(){var t=e(this),n=t.closest(".a").prev(".a"),r=t.val();if(r==n.find(">li:eq(1)").data("value"))return;n.find(">li:not(.noDirection)").remove();if(!r){n.children("li.noDirection").show()}else{t.closest("li").clone().find("input:radio").remove().end().find("label").wrapInner("<strong>").find(">strong").text(function(){return e(this).attr("title")}).unwrap().end().end().appendTo(n);n.find(">li.noDirection").hide()}}).change(function(){var t=e(this);t.trigger("redraw");if(t.attr("name")!="themeItem"){e("#theme").trigger("select-theme")}}).filter(":checked").change().end().filter('[name="themeItem"]').change(function(){var t=e(this),n,r,i,s;n=e("#theme").data("themes")||{};r=n[t.val()];if(!r)return;i=e("#skin").find(".i > input:radio").filter('[value=""]').prop("checked",true).end();for(var o in r){if(!r.hasOwnProperty(o))continue;s=o=="layout"?o:o+"-skin";if(r[o])i.filter('[name="'+s+'"][value="'+r[o]+'"]').prop("checked",true)}i.filter(":checked").trigger("redraw")}).end();e("#theme").bind("select-theme",function(){function c(e){var t="";for(var n in e){if(!e.hasOwnProperty(n))continue;if(n!="layout"&&!i.elements[n+"-skin"])continue;t+=n+"	"+e[n]+"\n"}return t}var t=e(this),n,r,i,s,o={},u,a;n=t.data("themes")||{};r=e("#skin").find(".i > input:radio");s=r.filter(':checked[value!=""]').get();i=r.get(0).form;for(var f=0,l=s.length;f<l;f++){a=s[f].name.match(/^layout|(\w+)-skin$/);o[a[1]||a[0]]=s[f].value}u=c(o);for(var h in n){if(!n.hasOwnProperty(h))continue;if(u==c(n[h])){t.find('input:radio[name="themeItem"][value="'+h+'"]').prop("checked",true).change();return}}t.find('input:radio[name="themeItem"][value="user_define"]').prop("checked",true).change()})})