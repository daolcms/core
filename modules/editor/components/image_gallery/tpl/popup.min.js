function getSlideShow(){var e,t,o,r,l,i,n,_,d="";if("undefined"!=typeof opener){e=opener.editorPrevNode,t=jQuery(e),t.is("img")&&(selected_node=e,o=$(e).width()-4,r=t.attr("gallery_style"),l=t.attr("gallery_align")||"center",i=t.attr("border_color"),n=t.attr("bg_color"),_=t.attr("border_thickness")||1,get_by_id("width").value=o,get_by_id("gallery_style").selectedIndex="list"==r?1:0,get_by_id("gallery_align").selectedIndex="left"==l?1:"right"==l?2:0,get_by_id("border_thickness").value=_,get_by_id("border_color_input").value=i,manual_select_color("border",get_by_id("border_color_input")),get_by_id("bg_color_input").value=n,manual_select_color("bg",get_by_id("bg_color_input")),d=t.attr("images_list"));var c=get_by_id("fo"),s=c.editor_sequence.value,a=get_by_id("image_list");jQuery.exec_json("file.getFileList",{editor_sequence:s},function(e){jQuery.each(e.files,function(e,t){var o=t.file_srl;if(o){var r=t.source_filename;if(/\.(jpe?g|png|gif)$/i.test(r)){var l=!1;-1!=d.indexOf(r)&&(l=!0);var i=new Option(t.source_filename,o,!1,l);a.options.add(i),files[t.file_srl]=t}}})})}}function insertSlideShow(){if("undefined"!=typeof opener){for(var e=new Array,t=get_by_id("image_list"),o=0;o<t.length;o++){var r=t.options[o];if(r.selected){var l=r.value,i=files[l],n=i.download_url.replace(request_uri,"");e[e.length]=n}}if(!e.length)return void window.close();for(var _=get_by_id("width").value,d=get_by_id("gallery_style").options[get_by_id("gallery_style").selectedIndex].value,c=get_by_id("gallery_align").options[get_by_id("gallery_align").selectedIndex].value,s=get_by_id("border_thickness").value,a=get_by_id("border_color_input").value,g=get_by_id("bg_color_input").value,u="",o=0;o<e.length;o++)u+=e[o].trim()+" ";if(selected_node)selected_node.setAttribute("width",_),selected_node.setAttribute("gallery_style",d),selected_node.setAttribute("align",c),selected_node.setAttribute("gallery_align",c),selected_node.setAttribute("border_thickness",s),selected_node.setAttribute("border_color",a),selected_node.setAttribute("bg_color",g),selected_node.setAttribute("images_list",u),selected_node.style.width=_+"px";else{var b='<img src="../../../../common/img/blank.gif" editor_component="image_gallery" width="'+_+'" gallery_style="'+d+'" align="'+c+'" gallery_align="'+c+'" border_thickness="'+s+'" border_color="'+a+'" bg_color="'+g+'" style="width:'+_+'px;border:2px dotted #4371B9;background:url(./modules/editor/components/image_gallery/tpl/image_gallery_component.gif) no-repeat center;" images_list="'+u+'" />';opener.editorFocus(opener.editorPrevSrl);var y=opener.editorGetIFrame(opener.editorPrevSrl);opener.editorReplaceHTML(y,b)}opener.editorFocus(opener.editorPrevSrl),window.close()}}function select_color(e,t){get_by_id(e+"_preview_color").style.backgroundColor="#"+t,get_by_id(e+"_color_input").value=t}function manual_select_color(e,t){6==t.value.length&&(code=t.value,get_by_id(e+"_preview_color").style.backgroundColor="#"+code)}function printColor(e,t){for(var o=new Array("22","44","66","88","AA","CC","EE"),r="",l=0;8>l;l+=1)r+=printColorBlock(e,l.toString(16)+l.toString(16)+l.toString(16)+l.toString(16)+l.toString(16)+l.toString(16),t);for(var l=0;l<o.length;l+=3)for(var i=0;i<o.length;i+=2)for(var n=0;n<o.length;n++){var _=o[l]+o[i]+o[n];r+=printColorBlock(e,_,t)}for(var l=8;16>l;l+=1)r+=printColorBlock(e,l.toString(16)+l.toString(16)+l.toString(16)+l.toString(16)+l.toString(16)+l.toString(16),t);document.write(r)}function printColorBlock(e,t,o){return"bg"==e?'<div style="float:left;background-color:#'+t+'"><img src="'+o+'" class="color_icon" onmouseover="this.className=\'color_icon_over\'" onmouseout="this.className=\'color_icon\'" onclick="select_color(\''+e+"','"+t+'\')" alt="color" /></div>':'<div style="float:left;background-color:#'+t+'"><img src="'+o+'" class="color_icon" onmouseover="this.className=\'color_icon_over\'" onmouseout="this.className=\'color_icon\'" onclick="select_color(\''+e+"','"+t+'\')" alt="color" /></div>'}var selected_node=null,files=[];jQuery(function(){getSlideShow()});